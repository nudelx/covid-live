(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{159:function(e,t,a){e.exports=a(343)},164:function(e,t,a){},165:function(e,t,a){},343:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(47),l=a.n(c),o=(a(164),a(165),a(8)),i=["active","cases","critical","deaths","recovered","todayCases","todayDeaths"],s=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},u=function(e){var t=e.country,a=e.index,c=Object(n.useState)("#"),l=Object(o.a)(c,2),u=l[0],m=l[1];return Object(n.useEffect)((function(){fetch("https://restcountries.eu/rest/v2/name/".concat("UK"===t?"GB":t,"?fields=name;flag")).then((function(e){return e.json()})).then((function(e){return e[0]&&m(e[0].flag)}))}),[t]),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"title"},r.a.createElement("div",null,a),r.a.createElement("div",{className:"flagHolder"},r.a.createElement("div",{className:"flag ".concat("world"===t.toLowerCase()?"world":"")},"#"!==u?r.a.createElement("img",{width:"30",height:"25",alt:t,src:u}):null),r.a.createElement("div",null,t))),r.a.createElement("div",{className:"body"},r.a.createElement("ul",null,i.map((function(t){return r.a.createElement("li",{key:t},r.a.createElement("span",null,"".concat(s(t),":")," "),r.a.createElement("span",null,e[t]))})))))},m=function(){return r.a.createElement("div",{className:"main-title"},r.a.createElement("div",null,"Covid-19 Live Dashboard"),r.a.createElement("div",{className:"sub-title"},"by ",r.a.createElement("a",{href:"https://github.com/nudelx"},"Nudelman Alex")),r.a.createElement("div",{className:"sub-title-2"},"DataSource:"," ",r.a.createElement("a",{href:"https://www.worldometers.info"},"www.worldometers.info")," with"," ",r.a.createElement("a",{href:"https://github.com/javieraviles/covidAPI"},"API")," by"," ",r.a.createElement("a",{href:"https://github.com/javieraviles"},"Javier Aviles")))},d=function(e){var t=e.onChangeSearch,a=e.search,n=(e.sort,e.onChangeSort),c=e.setShow,l=e.show,o=e.children;return r.a.createElement("div",{className:"header"},r.a.createElement(m,null),o,r.a.createElement("div",{onClick:function(){return c("grid"===l?"graph":"grid")},className:"toggleButton ".concat("grid"===l?"chart-icon":"grid-icon")}),r.a.createElement("div",{className:"tools"},r.a.createElement("div",{className:"search"},r.a.createElement("label",{htmlFor:"search"},"Search"),r.a.createElement("input",{placeholder:"...",id:"search",name:"search",onChange:function(e){e.preventDefault(),t(e.target.value)},value:a})),r.a.createElement("div",{className:"sort"},r.a.createElement("label",{htmlFor:"sort"},"Sort"),r.a.createElement("select",{id:"sort",onChange:function(e){return n(e.target.value)}},i.map((function(e){return r.a.createElement("option",{key:e,value:e},s(e))}))))))},h=a(13),f=function(e){var t=e.x,a=e.y,n=e.width,c=e.value;return r.a.createElement("g",null,r.a.createElement("text",{x:t+n+25,y:a+10,fill:"#ccc",textAnchor:"middle",dominantBaseline:"middle"},c))},v=function(e){var t=e.data,a=e.sortedKey,n=30*t.length,c=n<100?100:n;return r.a.createElement("div",{className:"chart"},r.a.createElement(h.c,{layout:"vertical",key:(new Date).getTime(),width:900,height:c,data:t,margin:{top:10,right:80,bottom:20,left:20}},r.a.createElement(h.h,{type:"number",verticalAlign:"top",orientation:"top"}),r.a.createElement(h.i,{dataKey:"country",type:"category",interval:0}),r.a.createElement(h.g,null),r.a.createElement(h.e,{verticalAlign:"top",align:"right"}),r.a.createElement(h.a,{type:"monotone",dataKey:"deaths",fill:"#e74c3c",stroke:"#c0392b"}),r.a.createElement(h.b,{dataKey:a,barSize:100,fill:"#2980b9"},r.a.createElement(h.d,{dataKey:a,content:f})),r.a.createElement(h.f,{type:"monotone",dataKey:"cases",stroke:"#27ae60"})))},E=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),l=Object(o.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)("active"),m=Object(o.a)(u,2),d=m[0],h=m[1],f=Object(n.useState)("grid"),v=Object(o.a)(f,2),E=v[0],b=v[1],g=function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){var t=setTimeout((function(){c(r+1)}),e);return function(){return clearTimeout(t)}}),[e,r]),r}(36e5),p=Object(n.useState)(null),w=Object(o.a)(p,2),y=w[0],j=w[1],O=Object(n.useState)(null),S=Object(o.a)(O,2),N=S[0],C=S[1],k=Object(n.useCallback)((function(){return fetch("https://coronavirus-19-api.herokuapp.com/countries/").then((function(e){return e.json()})).then((function(e){return C(e.shift()),e})).then((function(e){return r(e)})).then((function(){return y&&j(null)})).catch((function(e){return console.log(e.toString())||j("The API temporary unavailable ")}))}),[y]);return Object(n.useEffect)((function(){k()}),[k,g]),{error:y,cards:a,setCards:r,search:i,setSearch:s,sort:d,setSort:h,show:E,setShow:b,world:N,sortedCards:function(e){var t=e.cards,a=e.search,n=e.sort;return(a.length?t.filter((function(e){return e.country.match(new RegExp(a,"i"))})):t).sort((function(e,t){return e[n]>t[n]?-1:t[n]>e[n]?1:0}))}({cards:a,search:i,sort:d})}},b=function(e){var t=e.error;return r.a.createElement("div",null,r.a.createElement("div",{className:"fog"}),r.a.createElement("div",{className:"error"},r.a.createElement("div",{className:"errorMsg"},t)))},g=function(e){var t=e.world,a=Object(n.useRef)(null),c=Object(n.useState)(0),l=Object(o.a)(c,2),u=l[0],m=l[1],d=Object(n.useState)(window.outerWidth),h=Object(o.a)(d,2),f=h[0],v=h[1];return Object(n.useEffect)((function(){var e=function(){v(window.outerWidth),m(0)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(n.useEffect)((function(){var e=setTimeout((function(){return m((e=u,(Math.abs(e)>f?-1*e:e)+1));var e}),20);return function(){return clearTimeout(e)}}),[u,f]),t?r.a.createElement("div",{className:"worldCard"},r.a.createElement("div",{className:"world worldTitle"}),r.a.createElement("ul",{ref:a},i.map((function(e){return r.a.createElement("li",{style:{left:"".concat(-u,"px")},key:e},"".concat(s(e),": ").concat(t&&t[e]))})))):null},p=function(){var e=E(),t=e.search,a=e.setSearch,n=e.sort,c=e.setSort,l=e.show,o=e.setShow,i=e.sortedCards,s=e.error,m=e.world;return r.a.createElement("div",null,r.a.createElement(d,{onChangeSearch:a,search:t,sort:n,onChangeSort:c,setShow:o,show:l}),r.a.createElement("div",null,s&&r.a.createElement(b,{error:s}),"grid"===l?i.map((function(e,t){return r.a.createElement(u,Object.assign({key:e.country},e,{index:t+1}))})):r.a.createElement(v,{data:i,sortedKey:n})),r.a.createElement(g,{world:m}))};var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(p,null)))};l.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.f84d2c51.chunk.js.map