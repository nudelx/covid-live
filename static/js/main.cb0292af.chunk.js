(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{159:function(e,t,a){e.exports=a(343)},164:function(e,t,a){},165:function(e,t,a){},343:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(47),l=a.n(c),o=(a(164),a(165),a(8)),i=["active","cases","critical","deaths","recovered","todayCases","todayDeaths"],s=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},u=function(e){var t=e.country,a=e.index,c=Object(r.useState)("#"),l=Object(o.a)(c,2),u=l[0],m=l[1];return Object(r.useEffect)((function(){fetch("https://restcountries.eu/rest/v2/name/".concat("UK"===t?"GB":t,"?fields=name;flag")).then((function(e){return e.json()})).then((function(e){return e[0]&&m(e[0].flag)}))}),[t]),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"title"},n.a.createElement("div",null,a),n.a.createElement("div",{className:"flagHolder"},n.a.createElement("div",{className:"flag ".concat("world"===t.toLowerCase()?"world":"")},"#"!==u?n.a.createElement("img",{width:"30",height:"25",alt:t,src:u}):null),n.a.createElement("div",null,t))),n.a.createElement("div",{className:"body"},n.a.createElement("ul",null,i.map((function(t){return n.a.createElement("li",{key:t},n.a.createElement("span",null,"".concat(s(t),":")," "),n.a.createElement("span",null,e[t]))})))))},m=function(){return n.a.createElement("div",{className:"main-title"},n.a.createElement("div",null,"Covid-19 Live Dashboard"),n.a.createElement("div",{className:"sub-title"},"by ",n.a.createElement("a",{href:"https://github.com/nudelx"},"Nudelman Alex")),n.a.createElement("div",{className:"sub-title-2"},"DataSource:"," ",n.a.createElement("a",{href:"https://www.worldometers.info"},"www.worldometers.info")," with"," ",n.a.createElement("a",{href:"https://github.com/javieraviles/covidAPI"},"API")," by"," ",n.a.createElement("a",{href:"https://github.com/javieraviles"},"Javier Aviles")))},d=function(e){var t=e.onChangeSearch,a=e.search,r=(e.sort,e.onChangeSort),c=e.setShow,l=e.show,o=e.children;return n.a.createElement("div",{className:"header"},n.a.createElement(m,null),o,n.a.createElement("div",{onClick:function(){return c("grid"===l?"graph":"grid")},className:"toggleButton ".concat("grid"===l?"chart-icon":"grid-icon")}),n.a.createElement("div",{className:"tools"},n.a.createElement("div",{className:"search"},n.a.createElement("label",{htmlFor:"search"},"Search"),n.a.createElement("input",{placeholder:"...",id:"search",name:"search",onChange:function(e){e.preventDefault(),t(e.target.value)},value:a})),n.a.createElement("div",{className:"sort"},n.a.createElement("label",{htmlFor:"sort"},"Sort"),n.a.createElement("select",{id:"sort",onChange:function(e){return r(e.target.value)}},i.map((function(e){return n.a.createElement("option",{key:e,value:e},s(e))}))))))},h=a(13),f=function(e){var t=e.x,a=e.y,r=e.width,c=e.value;return n.a.createElement("g",null,n.a.createElement("text",{x:t+r+25,y:a+10,fill:"#ccc",textAnchor:"middle",dominantBaseline:"middle"},c))},v=function(e){var t=e.data,a=e.sortedKey,r=30*t.length,c=r<100?100:r;return n.a.createElement("div",{className:"chart"},n.a.createElement(h.c,{layout:"vertical",key:(new Date).getTime(),width:900,height:c,data:t,margin:{top:10,right:80,bottom:20,left:20}},n.a.createElement(h.h,{type:"number",verticalAlign:"top",orientation:"top"}),n.a.createElement(h.i,{dataKey:"country",type:"category",interval:0}),n.a.createElement(h.g,null),n.a.createElement(h.e,{verticalAlign:"top",align:"right"}),n.a.createElement(h.a,{type:"monotone",dataKey:"deaths",fill:"#e74c3c",stroke:"#c0392b"}),n.a.createElement(h.b,{dataKey:a,barSize:100,fill:"#2980b9"},n.a.createElement(h.d,{dataKey:a,content:f})),n.a.createElement(h.f,{type:"monotone",dataKey:"cases",stroke:"#27ae60"})))},E=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),l=Object(o.a)(c,2),i=l[0],s=l[1],u=Object(r.useState)("active"),m=Object(o.a)(u,2),d=m[0],h=m[1],f=Object(r.useState)("grid"),v=Object(o.a)(f,2),E=v[0],b=v[1],g=function(e){var t=Object(r.useState)(0),a=Object(o.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){var t=setTimeout((function(){c(n+1)}),e);return function(){return clearTimeout(t)}}),[e,n]),n}(36e5),p=Object(r.useState)(null),w=Object(o.a)(p,2),y=w[0],j=w[1],O=Object(r.useState)(null),S=Object(o.a)(O,2),N=S[0],C=S[1],k=Object(r.useCallback)((function(){return fetch("https://coronavirus-19-api.herokuapp.com/countries/").then((function(e){return e.json()})).then((function(e){return e.filter((function(e){return"world"===e.country.toLowerCase()?(C(e),!1):0!==e.country.length&&!["europe","asia","north america","total:"].includes(e.country.toLowerCase())}))})).then((function(e){n(e)})).then((function(){return y&&j(null)})).catch((function(e){return console.log(e.toString())||j("The API temporary unavailable ")}))}),[y]);return Object(r.useEffect)((function(){k()}),[k,g]),{error:y,cards:a,setCards:n,search:i,setSearch:s,sort:d,setSort:h,show:E,setShow:b,world:N,sortedCards:function(e){var t=e.cards,a=e.search,r=e.sort;return(a.length?t.filter((function(e){return e.country.match(new RegExp(a,"i"))})):t).sort((function(e,t){return e[r]>t[r]?-1:t[r]>e[r]?1:0}))}({cards:a,search:i,sort:d})}},b=function(e){var t=e.error;return n.a.createElement("div",null,n.a.createElement("div",{className:"fog"}),n.a.createElement("div",{className:"error"},n.a.createElement("div",{className:"errorMsg"},t)))},g=function(e){var t=e.world,a=Object(r.useRef)(null),c=Object(r.useState)(0),l=Object(o.a)(c,2),u=l[0],m=l[1],d=Object(r.useState)(window.outerWidth),h=Object(o.a)(d,2),f=h[0],v=h[1];return Object(r.useEffect)((function(){var e=function(){v(window.outerWidth),m(0)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(r.useEffect)((function(){var e=setTimeout((function(){return m((e=u,(Math.abs(e)>f?-1*e:e)+1));var e}),20);return function(){return clearTimeout(e)}}),[u,f]),t?n.a.createElement("div",{className:"worldCard"},n.a.createElement("div",{className:"world worldTitle"}),n.a.createElement("ul",{ref:a},i.map((function(e){return n.a.createElement("li",{style:{left:"".concat(-u,"px")},key:e},"".concat(s(e),": ").concat(t&&t[e]))})))):null},p=function(){var e=E(),t=e.search,a=e.setSearch,r=e.sort,c=e.setSort,l=e.show,o=e.setShow,i=e.sortedCards,s=e.error,m=e.world;return n.a.createElement("div",null,n.a.createElement(d,{onChangeSearch:a,search:t,sort:r,onChangeSort:c,setShow:o,show:l}),n.a.createElement("div",null,s&&n.a.createElement(b,{error:s}),"grid"===l?i.map((function(e,t){return n.a.createElement(u,Object.assign({key:e.country},e,{index:t+1}))})):n.a.createElement(v,{data:i,sortedKey:r})),n.a.createElement(g,{world:m}))};var w=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(p,null)))};l.a.render(n.a.createElement(w,null),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.cb0292af.chunk.js.map