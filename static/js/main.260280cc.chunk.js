(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{159:function(e,t,a){e.exports=a(343)},164:function(e,t,a){},165:function(e,t,a){},343:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(47),l=a.n(c),o=(a(164),a(165),function(e){var t=e.children;return n.a.createElement("div",{className:"header"},t)}),i=a(8),s=["europe","asia","north america","south america","total:"],u=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),l=Object(i.a)(c,2),o=l[0],u=l[1],m=Object(r.useState)("active"),d=Object(i.a)(m,2),f=d[0],h=d[1],v=function(e){var t=Object(r.useState)(0),a=Object(i.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){var t=setTimeout((function(){c(n+1)}),e);return function(){return clearTimeout(t)}}),[e,n]),n}(36e5),E=Object(r.useState)(null),b=Object(i.a)(E,2),p=b[0],g=b[1],y=Object(r.useState)(null),w=Object(i.a)(y,2),j=w[0],O=w[1],S=Object(r.useCallback)((function(){return fetch("https://coronavirus-19-api.herokuapp.com/countries/").then((function(e){return e.json()})).then(function(e){return function(t){return t.filter((function(t){return"world"===t.country.toLowerCase()?("function"===typeof e&&e(t),!1):0!==t.country.length&&!s.includes(t.country.toLowerCase())}))}}(O)).then(n).then((function(){return p&&g(null)})).catch(function(e){return function(t){console.log(t.toString())||e("The API temporary unavailable ")}}(g))}),[p]);return Object(r.useEffect)((function(){S()}),[S,v]),{error:p,cards:a,setCards:n,search:o,setSearch:u,sort:f,setSort:h,world:j,sortedCards:function(e){var t=e.cards,a=e.search,r=e.sort;return(a.length?t.filter((function(e){return e.country.match(new RegExp(a,"i"))})):t).sort((function(e,t){return e[r]>t[r]?-1:t[r]>e[r]?1:0}))}({cards:a,search:o,sort:f})}},m=["active","cases","critical","deaths","recovered","todayCases","todayDeaths"],d=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},f=function(e){var t=e.world,a=Object(r.useRef)(null),c=Object(r.useState)(0),l=Object(i.a)(c,2),o=l[0],s=l[1],u=Object(r.useState)(window.outerWidth),f=Object(i.a)(u,2),h=f[0],v=f[1];return Object(r.useEffect)((function(){var e=function(){v(window.outerWidth),s(0)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(r.useEffect)((function(){var e=setTimeout((function(){return s((e=o,(Math.abs(e)>h?-1*e:e)+1));var e}),20);return function(){return clearTimeout(e)}}),[o,h]),t?n.a.createElement("div",{className:"worldCard"},n.a.createElement("div",{className:"world worldTitle"}),n.a.createElement("ul",{ref:a},m.map((function(e){return n.a.createElement("li",{style:{left:"".concat(-o,"px")},key:e},"".concat(d(e),": ").concat(t&&t[e]))})))):null},h=function(){return n.a.createElement("div",{className:"main-title"},n.a.createElement("div",null,"Covid-19 Live Dashboard"),n.a.createElement("div",{className:"sub-title"},"by ",n.a.createElement("a",{href:"https://github.com/nudelx"},"Nudelman Alex")),n.a.createElement("div",{className:"sub-title-2"},"DataSource:"," ",n.a.createElement("a",{href:"https://www.worldometers.info"},"www.worldometers.info")," with"," ",n.a.createElement("a",{href:"https://github.com/javieraviles/covidAPI"},"API")," by"," ",n.a.createElement("a",{href:"https://github.com/javieraviles"},"Javier Aviles")))},v=[{label:"Live",id:"live",icon:"\u26a1\ufe0f"},{label:"Graph",id:"graph",icon:"\ud83d\udcc8"}];localStorage.getItem("anthon")&&v.push({label:"Prediction",id:"prediction",icon:"\ud83e\uddd9\ud83c\udffc\u200d\u2642\ufe0f"});var E=function(e){var t=e.tab,a=e.setTabs,r=e.tabs;return n.a.createElement("ul",{className:"tabs"},r.map((function(e){return n.a.createElement("li",{key:e.id,id:e.id,onClick:function(e){return a(e.target.id)},className:t===e.id?"active":""},"".concat(e.icon," ").concat(e.label))})))},b=function(e){var t=e.error;return n.a.createElement("div",null,n.a.createElement("div",{className:"fog"}),n.a.createElement("div",{className:"error"},n.a.createElement("div",{className:"errorMsg"},t)))},p=function(e){var t=e.onChangeSearch,a=e.search,r=e.onChangeSort;return n.a.createElement("div",{className:"tools"},n.a.createElement("div",{className:"search"},n.a.createElement("label",{htmlFor:"search"},"Search"),n.a.createElement("input",{placeholder:"...",id:"search",name:"search",onChange:function(e){e.preventDefault(),t(e.target.value)},value:a})),n.a.createElement("div",{className:"sort"},n.a.createElement("label",{htmlFor:"sort"},"Sort"),n.a.createElement("select",{id:"sort",onChange:function(e){return r(e.target.value)}},m.map((function(e){return n.a.createElement("option",{key:e,value:e},d(e))})))))},g=function(e){var t=e.country,a=e.index,c=Object(r.useState)("#"),l=Object(i.a)(c,2),o=l[0],s=l[1];return Object(r.useEffect)((function(){fetch("https://restcountries.eu/rest/v2/name/".concat("UK"===t?"GB":t,"?fields=name;flag")).then((function(e){return e.json()})).then((function(e){return e[0]&&s(e[0].flag)}))}),[t]),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"title"},n.a.createElement("div",null,a),n.a.createElement("div",{className:"flagHolder"},n.a.createElement("div",{className:"flag ".concat("world"===t.toLowerCase()?"world":"")},"#"!==o?n.a.createElement("img",{width:"30",height:"25",alt:t,src:o}):null),n.a.createElement("div",null,t))),n.a.createElement("div",{className:"body"},n.a.createElement("ul",null,m.map((function(t){return n.a.createElement("li",{key:t},n.a.createElement("span",null,"".concat(d(t),":")," "),n.a.createElement("span",null,e[t]))})))))},y=a(13),w=function(e){var t=e.x,a=e.y,r=e.width,c=e.value;return n.a.createElement("g",null,n.a.createElement("text",{x:t+r+25,y:a+10,fill:"#ccc",textAnchor:"middle",dominantBaseline:"middle"},c))},j=function(e){var t=e.data,a=e.sortedKey,r=30*t.length,c=r<100?100:r;return n.a.createElement("div",{className:"chart"},n.a.createElement(y.c,{layout:"vertical",key:(new Date).getTime(),width:900,height:c,data:t,margin:{top:10,right:80,bottom:20,left:20}},n.a.createElement(y.h,{type:"number",verticalAlign:"top",orientation:"top"}),n.a.createElement(y.i,{dataKey:"country",type:"category",interval:0}),n.a.createElement(y.g,null),n.a.createElement(y.e,{verticalAlign:"top",align:"right"}),n.a.createElement(y.a,{type:"monotone",dataKey:"deaths",fill:"#e74c3c",stroke:"#c0392b"}),n.a.createElement(y.b,{dataKey:a,barSize:100,fill:"#2980b9"},n.a.createElement(y.d,{dataKey:a,content:w})),n.a.createElement(y.f,{type:"monotone",dataKey:"cases",stroke:"#27ae60"})))},O={live:function(e){return e.sortedCards.map((function(e,t){return n.a.createElement(g,Object.assign({key:e.country},e,{index:t+1}))}))},graph:function(e){var t=e.sortedCards,a=e.sort;return n.a.createElement(j,{data:t,sortedKey:a})},prediction:function(e){}},S=function(e){var t=e.tab,a=e.search,r=e.setSearch,c=e.sort,l=e.setSort,o=e.sortedCards,i=e.error;return n.a.createElement("div",{className:"board"},n.a.createElement(p,{search:a,onChangeSearch:r,sort:c,onChangeSort:l}),i&&n.a.createElement(b,{error:i}),O[t]({sortedCards:o,sort:c}))},N=function(){var e=function(e){var t=Object(r.useState)(e),a=Object(i.a)(t,2);return{tab:a[0],setTabs:a[1],tabs:v}}("live"),t=e.tab,a=e.setTabs,c=e.tabs,l=u(),s=l.search,m=l.setSearch,d=l.sort,b=l.setSort,p=l.sortedCards,g=l.error,y=l.world;return n.a.createElement("div",null,n.a.createElement(o,null,n.a.createElement(h,null),n.a.createElement(E,{tab:t,setTabs:a,tabs:c})),n.a.createElement(S,{search:s,setSearch:m,sort:d,setSort:b,sortedCards:p,error:g,tab:t}),n.a.createElement(f,{world:y}))};var C=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(N,null)))};l.a.render(n.a.createElement(C,null),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.260280cc.chunk.js.map