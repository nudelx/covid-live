{"version":3,"sources":["options.js","card.js","title.js","header.js","chart.js","useCovidHook.js","useTimer.js","error.js","worldCard.js","covidBoard.js","App.js","index.js"],"names":["options","capitalize","s","charAt","toUpperCase","slice","props","country","index","useState","flag","setFlag","useEffect","fetch","then","res","json","data","className","toLowerCase","width","height","alt","src","map","o","key","href","onChangeSearch","search","onChangeSort","sort","setShow","show","children","onClick","htmlFor","placeholder","id","name","onChange","e","preventDefault","target","value","renderCustomizedLabel","x","y","fill","textAnchor","dominantBaseline","sortedKey","calculated","length","graphHeight","layout","Date","getTime","margin","top","right","bottom","left","type","verticalAlign","orientation","dataKey","interval","align","stroke","barSize","content","cards","setCards","setSearch","setSort","timer","delay","time","setTime","setTimeout","clearTimeout","useTimer","error","setError","world","setWorld","redundant","getData","useCallback","filter","c","includes","catch","console","log","toString","sortedCards","item","match","RegExp","a","b","prepareData","ulRef","useRef","pos","setPos","window","outerWidth","setWidth","resizeListener","addEventListener","removeEventListener","t","Math","abs","ref","style","useCovidHook","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dd33cb46.chunk.js","sourcesContent":["export const options = [\n  'active',\n  'cases',\n  'critical',\n  'deaths',\n  'recovered',\n  'todayCases',\n  'todayDeaths'\n]\n\nexport const capitalize = s => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n","import React, { useEffect, useState } from 'react'\nimport { options, capitalize } from './options'\n\nexport default (props) => {\n  const { country, index } = props\n  const [flag, setFlag] = useState('#')\n  useEffect(() => {\n    fetch(\n      `https://restcountries.eu/rest/v2/name/${\n        country === 'UK' ? 'GB' : country\n      }?fields=name;flag`\n    )\n      .then((res) => res.json())\n      .then((data) => data[0] && setFlag(data[0].flag))\n  }, [country])\n\n  return (\n    <div className=\"card\">\n      <div className=\"title\">\n        <div>{index}</div>\n        <div className=\"flagHolder\">\n          <div\n            className={`flag ${\n              country.toLowerCase() === 'world' ? 'world' : ''\n            }`}\n          >\n            {flag !== '#' ? (\n              <img width=\"30\" height=\"25\" alt={country} src={flag} />\n            ) : null}\n          </div>\n          <div>{country}</div>\n        </div>\n      </div>\n      <div className=\"body\">\n        <ul>\n          {options.map((o) => (\n            <li key={o}>\n              <span>{`${capitalize(o)}:`} </span>\n              <span>{props[o]}</span>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nexport default () => {\n  return (\n    <div className=\"main-title\">\n      <div>Covid-19 Live Dashboard</div>\n      <div className=\"sub-title\">\n        by <a href=\"https://github.com/nudelx\">Nudelman Alex</a>\n      </div>\n      <div className=\"sub-title-2\">\n        DataSource:{' '}\n        <a href=\"https://www.worldometers.info\">www.worldometers.info</a> with{' '}\n        <a href=\"https://github.com/javieraviles/covidAPI\">API</a> by{' '}\n        <a href=\"https://github.com/javieraviles\">Javier Aviles</a>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { options, capitalize } from './options'\nimport Title from './title'\n\nexport default ({\n  onChangeSearch,\n  search,\n  sort,\n  onChangeSort,\n  setShow,\n  show,\n  children,\n}) => {\n  return (\n    <div className=\"header\">\n      <Title />\n      {children}\n      <div\n        onClick={() => setShow(show === 'grid' ? 'graph' : 'grid')}\n        className={`toggleButton ${\n          show === 'grid' ? 'chart-icon' : 'grid-icon'\n        }`}\n      ></div>\n\n      <div className=\"tools\">\n        <div className=\"search\">\n          <label htmlFor=\"search\">Search</label>\n          <input\n            placeholder=\"...\"\n            id=\"search\"\n            name=\"search\"\n            onChange={(e) => {\n              e.preventDefault()\n              onChangeSearch(e.target.value)\n            }}\n            value={search}\n          />\n        </div>\n        <div className=\"sort\">\n          <label htmlFor=\"sort\">Sort</label>\n          <select id=\"sort\" onChange={(e) => onChangeSort(e.target.value)}>\n            {options.map((o) => (\n              <option key={o} value={o}>\n                {capitalize(o)}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport {\n  Bar,\n  Line,\n  Area,\n  XAxis,\n  YAxis,\n  ComposedChart,\n  Tooltip,\n  Legend,\n  LabelList,\n} from 'recharts'\nconst renderCustomizedLabel = (props) => {\n  const { x, y, width, value } = props\n  const radius = 10\n  const offSet = 25\n\n  return (\n    <g>\n      <text\n        x={x + width + offSet}\n        y={y + radius}\n        fill=\"#ccc\"\n        textAnchor=\"middle\"\n        dominantBaseline=\"middle\"\n      >\n        {value}\n      </text>\n    </g>\n  )\n}\nexport default ({ data, sortedKey }) => {\n  const calculated = 30 * data.length\n  const graphHeight = calculated < 100 ? 100 : calculated\n  return (\n    <div className=\"chart\">\n      <ComposedChart\n        layout=\"vertical\"\n        key={new Date().getTime()}\n        width={900}\n        height={graphHeight}\n        data={data}\n        margin={{\n          top: 10,\n          right: 80,\n          bottom: 20,\n          left: 20,\n        }}\n      >\n        <XAxis type=\"number\" verticalAlign=\"top\" orientation={'top'} />\n        <YAxis dataKey=\"country\" type=\"category\" interval={0} />\n\n        <Tooltip />\n        <Legend verticalAlign=\"top\" align=\"right\" />\n        <Area\n          type=\"monotone\"\n          dataKey=\"deaths\"\n          fill=\"#e74c3c\"\n          stroke=\"#c0392b\"\n        />\n        <Bar dataKey={sortedKey} barSize={100} fill=\"#2980b9\">\n          <LabelList dataKey={sortedKey} content={renderCustomizedLabel} />\n        </Bar>\n        <Line type=\"monotone\" dataKey=\"cases\" stroke=\"#27ae60\" />\n      </ComposedChart>\n    </div>\n  )\n}\n","import { useEffect, useState, useCallback } from 'react'\nimport useTimer from './useTimer'\nexport default () => {\n  const [cards, setCards] = useState([])\n  const [search, setSearch] = useState('')\n  const [sort, setSort] = useState('active')\n  const [show, setShow] = useState('grid')\n  const timer = useTimer(3600000) // 1 hours\n  const [error, setError] = useState(null)\n  const [world, setWorld] = useState(null)\n  const redundant = ['europe', 'asia', 'north america']\n\n  const getData = useCallback(\n    () =>\n      fetch('https://coronavirus-19-api.herokuapp.com/countries/')\n        .then((res) => res.json())\n        .then((res) => {\n          return res.filter((c) => {\n            if (\n              c.country.length === 0 ||\n              redundant.includes(c.country.toLowerCase())\n            ) {\n              return false\n            }\n            if (c.country.toLowerCase() === 'world') {\n              setWorld(c)\n              return false\n            }\n\n            return true\n          })\n        })\n        .then((res) => {\n          setCards(res)\n        })\n        .then(() => error && setError(null))\n        .catch(\n          (e) =>\n            console.log(e.toString()) ||\n            setError('The API temporary unavailable ')\n        ),\n    [error, redundant]\n  )\n\n  const prepareData = ({ cards, search, sort }) => {\n    const cardFiltered = search.length\n      ? cards.filter((item) => item.country.match(new RegExp(search, 'i')))\n      : cards\n\n    return cardFiltered.sort(function(a, b) {\n      if (a[sort] > b[sort]) return -1\n      if (b[sort] > a[sort]) return 1\n      return 0\n    })\n  }\n  useEffect(() => {\n    getData()\n  }, [getData, timer])\n\n  return {\n    error,\n    cards,\n    setCards,\n    search,\n    setSearch,\n    sort,\n    setSort,\n    show,\n    setShow,\n    world,\n    sortedCards: prepareData({ cards, search, sort }),\n  }\n}\n","import { useEffect, useState } from 'react'\nexport default delay => {\n  const [time, setTime] = useState(0)\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setTime(time + 1)\n    }, delay)\n    return () => clearTimeout(timer)\n  }, [delay, time])\n\n  return time\n}\n","import React from 'react'\n\nexport default ({ error }) => {\n  return (\n    <div>\n      <div className=\"fog\"></div>\n      <div className=\"error\">\n        <div className=\"errorMsg\">{error}</div>\n      </div>\n    </div>\n  )\n}\n","import React, { useEffect, useState, useRef } from 'react'\nimport { options, capitalize } from './options'\n\nexport default ({ world }) => {\n  const ulRef = useRef(null)\n  const [pos, setPos] = useState(0)\n  const [width, setWidth] = useState(window.outerWidth)\n  useEffect(() => {\n    const resizeListener = () => {\n      setWidth(window.outerWidth)\n      setPos(0)\n    }\n    window.addEventListener('resize', resizeListener)\n    return () => {\n      window.removeEventListener('resize', resizeListener)\n    }\n  }, [])\n\n  useEffect(() => {\n    const calcPos = (x) => (Math.abs(x) > width ? x * -1 : x)\n    const t = setTimeout(() => setPos(calcPos(pos) + 1), 20)\n    return () => clearTimeout(t)\n  }, [pos, width])\n\n  return world ? (\n    <div className=\"worldCard\">\n      <div className=\"world worldTitle\"></div>\n      <ul ref={ulRef}>\n        {options.map((o) => (\n          <li style={{ left: `${-pos}px` }} key={o}>{`${capitalize(\n            o\n          )}: ${world && world[o]}`}</li>\n        ))}\n      </ul>\n    </div>\n  ) : null\n}\n","import React from 'react'\nimport Card from './card'\nimport Header from './header'\nimport Chart from './chart'\nimport useCovidHook from './useCovidHook'\nimport Error from './error'\nimport WorldCard from './worldCard'\n\nexport default () => {\n  const {\n    search,\n    setSearch,\n    sort,\n    setSort,\n    show,\n    setShow,\n    sortedCards,\n    error,\n    world,\n  } = useCovidHook()\n  return (\n    <div>\n      <Header\n        onChangeSearch={setSearch}\n        search={search}\n        sort={sort}\n        onChangeSort={setSort}\n        setShow={setShow}\n        show={show}\n      ></Header>\n      <div>\n        {error && <Error error={error} />}\n        {show === 'grid' ? (\n          sortedCards.map((c, index) => (\n            <Card key={c.country} {...c} index={index + 1} />\n          ))\n        ) : (\n          <Chart data={sortedCards} sortedKey={sort} />\n        )}\n      </div>\n      <WorldCard world={world} />\n    </div>\n  )\n}\n","import React from 'react'\nimport './App.css'\nimport CovidBoard from './covidBoard'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <CovidBoard />\n      </header>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n// import * as serviceWorker from './serviceWorker';\n\n// const ga = ` <script\n// async\n// src=\"https://www.googletagmanager.com/gtag/js?id=UA-131329334-2\"\n// ></script>\n// <script>\n// window.dataLayer = window.dataLayer || []\n// function gtag() {\n//   dataLayer.push(arguments)\n// }\n// gtag('js', new Date())\n\n// gtag('config', 'UA-131329334-2')\n// </script>`\n// const div = document.createElement('div')\n// div.innerHTML = ga\n// document.querySelector('html').appendChild(div)\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}